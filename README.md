# Telegram Web App - Рецепты

Мини-приложение для Telegram бота с рецептами.

## Функциональность

1. **Список рецептов** - отображает карточки с картинками и описанием
2. **Детали рецепта** - показывает ингредиенты и инструкции приготовления
3. **Расчет питательной ценности** - автоматический расчет калорий, БЖУ и других показателей через AI (GPT-4o)
4. **Выбор аналогов** - позволяет выбрать альтернативные продукты

## Установка и запуск

### 1. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 2. Настройка API ключей

1. **Telegram Bot Token:**
   - Создайте бота через [@BotFather](https://t.me/botfather)
   - Получите токен бота

2. **OpenRouter API Key (для расчета питательности):**
   - Зарегистрируйтесь на [OpenRouter.ai](https://openrouter.ai/)
   - Получите API ключ в разделе "Keys"

3. Создайте файл `.env` и добавьте конфигурацию:
   ```
   BOT_TOKEN=ваш_токен_бота
   WEBAPP_URL=https://your-domain.com
   OPENROUTER_API_KEY=ваш_openrouter_api_ключ
   ```

### 3. Запуск веб-приложения

```bash
python app.py
```

Приложение будет доступно по адресу `http://localhost:5000`

### 4. Настройка Web App в Telegram

1. Отправьте команду `/setmenubutton` в @BotFather
2. Выберите вашего бота
3. Укажите URL вашего веб-приложения, который задается переменной окружения `WEBAPP_URL`. Убедитесь, что URL начинается с `https://` и является вашим публичным адресом (например, `https://your-domain.com`)
4. Укажите название кнопки (например, "Открыть рецепты")

**Важно:** Telegram Web Apps требуют HTTPS. Для локального тестирования используйте инструменты типа [ngrok](https://ngrok.com/).

### 5. Запуск Telegram бота

```bash
python bot.py
```

## Структура проекта

```
telegram-recipes-app/
├── bot.py              # Telegram бот
├── app.py              # Flask веб-приложение
├── requirements.txt    # Зависимости
├── .env.example        # Пример файла конфигурации
├── README.md          # Документация
├── templates/         # HTML шаблоны
│   ├── index.html     # Список рецептов
│   ├── recipe.html    # Детали рецепта
│   └── cart.html      # Выбор аналогов
└── static/            # Статические файлы
    ├── css/
    │   └── style.css  # Стили
    └── js/
        ├── index.js   # Логика списка рецептов
        ├── recipe.js  # Логика деталей рецепта
        └── cart.js    # Логика корзины
```

## Использование

1. Откройте бота в Telegram
2. Нажмите кнопку "Открыть рецепты"
3. Выберите рецепт из списка
4. Посмотрите ингредиенты, питательную ценность и инструкции
5. Нажмите "Добавить в корзину"
6. Выберите альтернативные продукты
7. Подтвердите выбор

## Функция расчета питательности

Приложение автоматически рассчитывает для каждого рецепта:
- **Калории** на порцию
- **Белки, жиры, углеводы** (БЖУ)
- **Клетчатку** и **сахар**
- **Натрий**
- **Количество порций**

Расчет выполняется с помощью AI модели GPT-4o через OpenRouter API, учитывая:
- Точные данные о питательной ценности продуктов
- Потери при термической обработке
- Способ приготовления

## Деплой

Для публичного доступа рекомендуется использовать:
- **Heroku** - бесплатный хостинг для Python
- **Railway** - современный хостинг
- **DigitalOcean** - VPS для полного контроля

## Примечания

- Приложение использует Telegram Web App API
- Автоматически адаптируется под тему Telegram
- Работает на всех платформах (iOS, Android, Web)
